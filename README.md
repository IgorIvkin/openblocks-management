# Бэкенд для проекта "OpenBlocks Управление"

Сервис **openblocks-management** представляет собой бэкенд для приложения "OpenBlocks Управление".

Приложение "Управление" &mdash; это система управления задачами и дефектами. В первую очередь она
предназначена для пользователей, которые ведут разработку программного обеспечения, но подходит
и для других сфер деятельности.

## Как запустить

### Предварительные требования

Вам потребуется база данных PostgreSQL, а также пользователь, у которого будут права на создание 
и изменение таблиц, поскольку проект содержит миграции базы данных.

Вам потребуется задать настройки БД и другие важные параметры в зависимости от выбранного способа развертывания.

### Docker
Наиболее простым способом запустить сервис является развертывание в **Docker**.

Вместе с сервисом поставляется простой `Dockerfile` и `docker-compose.yml`. Для запуска склонируйте себе
репозиторий и запустите команду:

    docker-compose up -d

Для запуска в Docker вам не потребуется иметь на компьютере JDK.

Настройки содержатся в файле `Dockerfile` в переменных окружения `ENV`.

| Переменная        |                                                            Описание                                                            |
|-------------------|:------------------------------------------------------------------------------------------------------------------------------:|
| APP_COOKIE_DOMAIN |                                Домен, которому выдаётся cookie, по умолчанию, management.local                                 |
| FILE_STORAGE_PATH |                         Путь для хранения пользовательских файлов, по умолчанию /home/app/filestorage/                         |
| DATASOURCE_URL    | JDBC-URL вашей БД PostgreSQL.<br/>По умолчанию указан следующий:<br/>jdbc:postgresql://host.docker.internal:5432/management_db |
| DATASOURCE_USERNAME |                                                      Имя пользователя БД                                                       |
| DATASOURCE_USERNAME |                                                     Пароль пользователя БД                                                     |


### Ручной запуск
В качестве основной системы сборки используется Maven.

Запустите следующую команду:

Для Linux
    
    ./mvnw package

Для Windows

    mvnw.cmd package

Далее перейдите в директорию `target` и запустите следующую команду:

    java -jar management-0.0.1-SNAPSHOT.jar

Настройки потребуется задать ключами запуска приложения формата `-DИМЯ=ЗНАЧЕНИЕ`, аналогично секции
с развертыванием в Docker, например:

    java -jar -DDATASOURCE_USERNAME="management_techuser" ... management-0.0.1-SNAPSHOT.jar



### Техническое описание

Сервис написан на языке программирования Java, для запуска требуется LTS версия 21. В качестве
основного хранилища данных предполагается БД PostgreSQL.

Используется фреймворк Spring Boot 3.

Сервис работает как REST API для потребителей, не имеет механизмов рендеринга данных и может быть
использован независимо от других компонентов приложения "Управление".

### Системные требования
| Требование       |        Версия         |
|------------------|:---------------------:|
| JDK              |          21           |
| PostgreSQL       |          12+          |
| Operating system | Windows, Linux, MacOS |

### Об инициативе OpenBlocks

Инициатива **OpenBlocks** &mdash; это проекты с открытым исходным кодом. Основная цель состоит в том,
чтобы предоставить открытые и расширяемые решения для пользователей любого масштаба.


